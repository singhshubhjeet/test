import React, { useState } from 'react';

const SamlDecoder: React.FC = () => {
  const [samlRequest, setSamlRequest] = useState<string>('');
  const [decodedValue, setDecodedValue] = useState<string>('');

  const decodeSamlRequest = () => {
    try {
      const parser = new DOMParser();
      const xmlDoc = parser.parseFromString(samlRequest, 'application/xml');

      const base64Request = xmlDoc.querySelector('samlp\\:AuthnRequest')?.textContent;
      const decodedRequest = base64Request ? atob(base64Request) : '';
      
      setDecodedValue(decodedRequest);
    } catch (error) {
      console.error('Error decoding SAML Request:', error.message);
      setDecodedValue('Error decoding SAML Request. Please check the input.');
    }
  };

  return (
    <div>
      <h2>SAML Request Decoder</h2>
      <textarea
        placeholder="Paste your SAML Request here"
        value={samlRequest}
        onChange={(e) => setSamlRequest(e.target.value)}
      />
      <br />
      <button onClick={decodeSamlRequest}>Decode</button>
      <br />
      <h3>Decoded Value:</h3>
      <pre>{decodedValue}</pre>
    </div>
  );
};

export default SamlDecoder;
